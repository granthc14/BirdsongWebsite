<style>
table {
    font-size: 18px;
}

</style>
<div class="w3-container">
    <div class="w3-half">
        <div class="w3-card-4 w3-margin" id="foodHalf">
            <header class="w3-container w3-blue">
                <h1>Food <span class="add" onclick="document.getElementById('foodModal').style.display='block'" style="float:right;">Add</span></h1>
            </header>
            <table class="w3-table w3-striped w3-padding-32">
              <tbody>
                <!-- food populates here -->
              </tbody>
            </table>
        </div>
    </div>
    <div class="w3-half">
        <div class="w3-card-4 w3-margin" id="drinkHalf" style="vertical-align: center;">
            <header class="w3-container w3-blue">
                <h1>Drinks <span class="add" onclick="document.getElementById('drinkModal').style.display='block'"  style="float:right;">Add</span></h1>
            </header>
            <table class="w3-table w3-striped w3-padding-32">
              <tbody>
                <!-- drinks populate here -->
              </tbody>
            </table>
        </div>
    </div>
</div>
<br>
<div class="w3-container">
    <div class="w3-half">
        <div class="w3-card-4 w3-margin" id="popCornHalf">
            <header class="w3-container w3-blue">
                <h1>Popcorn <span class="add" onclick="document.getElementById('popcornModal').style.display='block'"  style="float:right;">Add</span></h1>
            </header>
            <table class="w3-table w3-striped w3-padding-32">
              <tbody>
                <!-- popcorn populates here -->
              </tbody>
            </table>
        </div>
    </div>
    <div class="w3-half">
        <div class="w3-card-4 w3-margin" id="candyHalf">
            <header class="w3-container w3-blue">
                <h1>Candy <span class="add" onclick="document.getElementById('candyModal').style.display='block'"  style="float:right;">Add</span></h1>
            </header>
            <table class="w3-table w3-striped w3-padding-32">
              <tbody>
                <!-- candy populates here -->
              </tbody>
            </table>
        </div>
    </div>
</div>
<br>

<!-- modals for adding food/drink/etc. -->
<div id="foodModal" class="w3-modal">
  <div class="w3-modal-content">

    <header class="w3-container w3-green">
      <span onclick="document.getElementById('foodModal').style.display='none'"
      class="w3-button w3-display-topright">&times;</span>
      <h2>Add Food</h2>
    </header>
    <br><br>

    <div class="w3-container">
      <label class="w3-text-gray">Name</label>
      <input class="w3-input w3-border" id="foodName" type="text" required></input>
      <br>
      <label class="w3-text-gray">Price</label>
      <input class="w3-input w3-border" id="foodPrice" type="number" required></input><br><br>

      <button class="w3-button w3-green" id="foodSubmit">Submit</button><br><br>
    </div>
  </div>
</div>
<div id="drinkModal" class="w3-modal">
  <div class="w3-modal-content">

    <header class="w3-container w3-green">
      <span onclick="document.getElementById('drinkModal').style.display='none'"
      class="w3-button w3-display-topright">&times;</span>
      <h2>Add Drink</h2>
    </header>
    <br><br>

    <div class="w3-container">
      <label class="w3-text-gray">Name</label>
      <input class="w3-input w3-border" id="drinkName" type="text" required></input>
      <br>
      <label class="w3-text-gray">Price</label>
      <input class="w3-input w3-border" id="drinkPrice" type="number" required></input><br><br>

      <button class="w3-button w3-green" id="drinkSubmit">Submit</button><br><br>
    </div>
  </div>
</div>
<div id="popcornModal" class="w3-modal">
  <div class="w3-modal-content">

    <header class="w3-container w3-green">
      <span onclick="document.getElementById('popcornModal').style.display='none'"
      class="w3-button w3-display-topright">&times;</span>
      <h2>Add Popcorn</h2>
    </header>
    <br><br>

    <div class="w3-container">
      <label class="w3-text-gray">Name</label>
      <input class="w3-input w3-border" id="popcornName" type="text" required></input>
      <br>
      <label class="w3-text-gray">Price</label>
      <input class="w3-input w3-border" id="popcornPrice" type="number" required></input><br><br>

      <button class="w3-button w3-green" id="popcornSubmit">Submit</button><br><br>
    </div>
  </div>
</div>
<div id="candyModal" class="w3-modal">
  <div class="w3-modal-content">

    <header class="w3-container w3-green">
      <span onclick="document.getElementById('candyModal').style.display='none'"
      class="w3-button w3-display-topright">&times;</span>
      <h2>Add Candy</h2>
    </header>
    <br><br>

    <div class="w3-container">
      <label class="w3-text-gray">Name</label>
      <input class="w3-input w3-border" id="candyName" type="text" required></input>
      <br>
      <label class="w3-text-gray">Price</label>
      <input class="w3-input w3-border" id="candyPrice" type="number" required></input><br><br>

      <button class="w3-button w3-green" id="candySubmit">Submit</button><br><br>
    </div>
  </div>
</div>

<div id="successModal" class="w3-modal">
  <div class="w3-modal-content">

    <header class="w3-container w3-green">
      <span onclick="document.getElementById('successModal').style.display='none'"
      class="w3-button w3-display-topright">&times;</span>
    </header>
    <br><br>

    <div class="w3-container">
      <p>Item was successfully added!<br>Refresh the page to see the updated concessions menu.</p>
    </div>
  </div>
</div>
<div id="failModal" class="w3-modal">
  <div class="w3-modal-content">

    <header class="w3-container w3-green">
      <span onclick="document.getElementById('failModal').style.display='none'"
      class="w3-button w3-display-topright">&times;</span>
    </header>
    <br><br>

    <div class="w3-container">
      <p>There was an error with adding your item.<br>Please try again.</p>
    </div>
  </div>
</div>

<script>
$('#drinkHalf').height($('#foodHalf').height());
$('#candyHalf').height($('#popCornHalf').height());

$(document).ready(function() {
  //populate food, drinks, etc. from json string
  $.getJSON("http://birdsong.mybluemix.net/get_food", function(data) {
    $.each(data, function(i, item) {
      console.log(item);

      var $tr=$('<tr class=\'tableBody\'></tr>');
      $tr.append($('<td></td>',{text : item.Name}));
      $tr.append($('<td></td>',{text : '$'+item.Price}));
      $tr.append($('<td><a href="#">Delete</a></td>'));
      $tr.append($('<td></td>'));
      $('#foodHalf').find('tbody').append($tr);
    });
  });

  $.getJSON("http://birdsong.mybluemix.net/get_drinks", function(data) {
    $.each(data, function(i, item) {
      console.log(item);

      var $tr=$('<tr class=\'tableBody\'></tr>');
      $tr.append($('<td></td>',{text : item.Name}));
      $tr.append($('<td></td>',{text : '$'+item.Price}));
      $tr.append($('<td><a href="#">Delete</a></td>'));
      $tr.append($('<td></td>'));
      $('#drinkHalf').find('tbody').append($tr);
    });
  });

  $.getJSON("http://birdsong.mybluemix.net/get_popcorn", function(data) {
    $.each(data, function(i, item) {
      console.log(item);

      var $tr=$('<tr class=\'tableBody\'></tr>');
      $tr.append($('<td></td>',{text : item.Name}));
      $tr.append($('<td></td>',{text : '$'+item.Price}));
      $tr.append($('<td><a href="#">Delete</a></td>'));
      $tr.append($('<td></td>'));
      $('#popCornHalf').find('tbody').append($tr);
    });
  });

  $.getJSON("http://birdsong.mybluemix.net/get_candy", function(data) {
    $.each(data, function(i, item) {
      console.log(item);

      var $tr=$('<tr class=\'tableBody\'></tr>');
      $tr.append($('<td></td>',{text : item.Name}));
      $tr.append($('<td></td>',{text : '$'+item.Price}));
      $tr.append($('<td><a href="#">Delete</a></td>'));
      $tr.append($('<td></td>'));
      $('#candyHalf').find('tbody').append($tr);
    });
  });

  $('#foodSubmit').on('click', function() {
    var name = $('#foodName').val();
    var price = $('#foodPrice').val();
    console.log(name+" "+price);
    var jsonObj = {
      name: name,
      price: price
    }

    $.ajax({
      type: 'PUT',
      url: '/add_food',
      dataType: 'JSON',
      contentType: "application/json; charset=utf-8",
      data: JSON.stringify(jsonObj),
      success: function(data){
        $('#successModal').show();
      },
      error: function(data) {
        $('#failModal').show();
      }
    })
  });

  $('#drinkSubmit').on('click', function() {
    var name = $('#drinkName').val();
    var price = $('#drinkPrice').val();
    var jsonObj = {
      name: name,
      price: price
    }

    $.ajax({
      type: 'PUT',
      url: '/add_drink',
      dataType: 'JSON',
      contentType: "application/json; charset=utf-8",
      data: JSON.stringify(jsonObj),
      success: function(data){
        $('#successModal').show();
      },
      error: function(data) {
        $('#failModal').show();
      }
    })
  });

  $('#popcornSubmit').on('click', function() {
    var name = $('#popcornName').val();
    var price = $('#popcornPrice').val();
    var jsonObj = {
      name: name,
      price: price
    }

    $.ajax({
      type: 'PUT',
      url: '/add_popcorn',
      dataType: 'JSON',
      contentType: "application/json; charset=utf-8",
      data: JSON.stringify(jsonObj),
      success: function(data){
        $('#successModal').show();
      },
      error: function(data) {
        $('#failModal').show();
      }
    })
  });

  $('#candySubmit').on('click', function() {
    var name = $('#candyName').val();
    var price = $('#candyPrice').val();
    var jsonObj = {
      name: name,
      price: price
    }

    $.ajax({
      type: 'PUT',
      url: '/add_candy',
      dataType: 'JSON',
      contentType: "application/json; charset=utf-8",
      data: JSON.stringify(jsonObj),
      success: function(data){
        $('#successModal').show();
      },
      error: function(data) {
        $('#failModal').show();
      }
    })
  });
});
</script>
